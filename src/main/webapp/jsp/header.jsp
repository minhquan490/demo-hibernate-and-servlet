<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8" isELIgnored="false"%>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
        <div class="header">
            <div class="grid">
                <nav class="header__navbar">
                    <ul class="header__navbar-list">
                        <li class="header__navbar-item">
                            <a href="${pageContext.request.contextPath}/welcome" class="header__navbar-item-link separate">Trang chủ</a
                        </li>
                        <li class="header__navbar-item">
                            <span class="header__navbar-title--no-poiter">Kết nối</span>
                            <a href="https://www.facebook.com/profile.php?id=100009585947523" class="header__navbar-icon-link">
                                <i class="header__navbar-icon fab fa-facebook"></i>
                            </a>
                        </li>
                    </ul>
                    <ul class="header__navbar-list">
                        <li class="header__navbar-item header__navbar-item--has-notify">
                            <a href="#" class="header__navbar-item-link">
                                <i class="header__navbar-icon far fa-bell"></i>Thông báo
                            </a>
                            <div class="header__notify">
                                <header class="header__notify-header">
                                    <h3>Thông Báo Mới Nhận</h3>
                                </header>
                                <ul class="header__notify-list">
                                    <c:forEach items="${listProductsHasSale}" var="product">
                                        <li class="header__notify-item header__notify-item--readed">
                                            <a href="${pageContext.request.contextPath}/product/detail?idProduct=${product.id}" class="header__notify-link">
                                                <img src="${pageContext.request.contextPath}/images/${product.picture}" class="header__notify-img">
                                                <div class="header__notify-info">
                                                    <span class="header__notify-name">
                                                    ${product.name}
                                                </span>
                                                    <span class="header__notify-description">
                                                    ${product.saleDescription}
                                                </span>
                                                </div>
                                            </a>
                                        </li>
                                    </c:forEach>
                                </ul>
                                <footer class="header__notify-footer">
                                    <a href="${pageContext.request.contextPath}/sale?re=all" class="header__notify-footer-btn">Xem tất cả</a>
                                </footer>
                            </div>
                        </li>
                        <li class="header__navbar-item">
                            <!-- TODO help here -->
                            <a href="" class="header__navbar-item-link">
                                <i class="header__navbar-icon header__navbar-icon far fa-question-circle"></i>Trợ giúp
                            </a>
                        </li>
                        <c:choose>
                            <c:when test="${empty sessionScope.user}">
                                <li class="header__navbar-item">
                                    <a href="${pageContext.request.contextPath}/register" class="header__navbar-item-link header__navbar-item-link--bold separate">Đăng ký</a>
                                </li>
                                <li class="header__navbar-item">
                                    <a href="${pageContext.request.contextPath}/login" class="header__navbar-item-link header__navbar-item-link--bold">Đăng nhập</a>
                                </li>
                            </c:when>
                            <c:otherwise>
                                <li class="header__navbar-item header__navbar-user">
                                    <c:choose>
                                        <c:when test="${empty sessionScope.user.avatar}">
                                            <i class=" fas fa-user" style="position: relative; top: -1px;"></i>
                                        </c:when>
                                        <c:otherwise>
                                            <img src="${pageContext.request.contextPath}/images/${sessionScope.user.avatar}" alt="avatar" class="header__navbar-user-img">
                                        </c:otherwise>
                                    </c:choose>
                                    <span class="header__navbar-user-name">${sessionScope.user.fullName}</span>
                                    <ul class="header__navbar-user-menu">
                                        <li class="header__navbar-user-item">
                                            <a href="${pageContext.request.contextPath}/myaccount" class="link">Tài khoản của tôi</a>
                                        </li>
                                        <li class="header__navbar-user-item">
                                            <a href="${pageContext.request.contextPath}/myorder" class="link">Đơn mua</a>
                                        </li>
                                        <li class="header__navbar-user-item header__navbar-user-item--separate">
                                            <a href="${pageContext.request.contextPath}/logout" class="link">Đăng xuất</a>
                                        </li>
                                    </ul>
                                </li>
                            </c:otherwise>
                        </c:choose>
                    </ul>
                </nav>
                <div class="header-with-search">
                    <div class="header__logo">
                        <a href="${pageContext.request.contextPath}/welcome" class="header__logo-link">
                            <svg class="header__logo-img" viewBox="0 0 400 130">
                                <g fill-rule="evenodd">
                                    <!-- TODO path here -->
                                    <path fill="#060606" d="M64.417 13.775 C 63.030 14.092,60.464 16.498,59.510 18.375 C 59.382 18.627,59.215 18.833,59.139 18.833 C 59.062 18.833,59.000 18.912,59.000 19.008 C 59.000 19.104,58.754 19.573,58.454 20.050 C 57.962 20.831,57.169 22.402,55.954 25.000 C 55.003 27.034,54.500 28.182,54.500 28.320 C 54.500 28.539,54.052 28.675,52.500 28.924 C 50.631 29.224,49.562 29.435,48.750 29.664 C 48.383 29.768,47.858 29.913,47.583 29.986 C 47.308 30.060,46.389 30.391,45.540 30.721 C 43.758 31.414,43.859 31.433,42.087 30.082 C 38.386 27.260,33.789 24.611,31.104 23.753 C 27.429 22.579,25.790 23.888,25.157 28.500 C 24.626 32.377,25.183 38.842,26.669 46.056 L 27.007 47.694 26.522 48.722 C 25.292 51.324,24.657 53.046,23.990 55.583 C 23.048 59.169,22.860 63.528,23.512 66.639 C 23.601 67.067,23.720 67.700,23.776 68.046 C 23.832 68.392,23.943 68.715,24.022 68.764 C 24.102 68.813,24.167 69.021,24.167 69.227 C 24.167 69.432,24.229 69.671,24.306 69.758 C 25.469 71.082,25.121 71.748,22.875 72.492 C 19.634 73.566,15.723 75.686,15.940 76.251 C 16.045 76.526,16.676 76.587,16.925 76.348 C 17.133 76.148,18.697 75.275,19.750 74.771 C 23.674 72.893,26.000 72.326,26.000 73.246 C 26.000 73.386,26.059 73.500,26.131 73.500 C 26.203 73.500,26.403 73.744,26.577 74.042 C 26.751 74.340,27.675 75.368,28.632 76.327 C 29.793 77.491,30.323 78.135,30.227 78.265 C 30.148 78.373,29.577 79.088,28.958 79.855 C 27.503 81.658,27.646 81.470,27.060 82.333 C 25.172 85.109,23.993 87.684,24.415 88.106 C 24.776 88.466,24.865 88.359,25.822 86.409 C 26.558 84.908,28.621 81.600,28.987 81.333 C 29.050 81.287,29.322 80.952,29.592 80.588 C 30.705 79.087,31.304 78.568,31.665 78.793 C 34.411 80.509,38.176 81.851,42.000 82.479 C 44.649 82.914,48.737 83.235,50.214 83.123 C 51.819 83.002,51.933 83.078,51.605 84.045 C 49.906 89.048,50.464 94.544,52.901 96.821 C 54.367 98.190,52.426 97.997,50.498 96.582 C 48.757 95.304,48.476 94.191,48.873 90.139 C 49.212 86.679,48.619 85.132,46.815 84.771 C 40.579 83.524,38.501 94.409,43.949 99.783 C 46.390 102.190,47.321 102.417,54.750 102.415 C 60.369 102.414,62.076 102.304,65.333 101.730 C 67.711 101.311,68.215 101.205,69.167 100.927 C 69.932 100.704,71.644 100.311,73.667 99.894 C 73.896 99.847,74.233 99.746,74.417 99.671 C 74.600 99.595,75.012 99.444,75.333 99.334 C 77.746 98.509,80.241 96.798,80.802 95.583 C 80.886 95.400,81.040 95.063,81.144 94.833 C 82.917 90.917,79.441 82.502,74.492 78.727 C 73.444 77.928,73.456 77.776,74.616 77.227 C 75.639 76.743,78.084 75.284,78.513 74.901 C 78.658 74.772,78.858 74.667,78.958 74.667 C 79.057 74.667,79.164 74.610,79.194 74.542 C 79.225 74.473,79.848 73.967,80.579 73.417 C 81.993 72.353,84.439 70.009,85.257 68.935 C 85.528 68.579,85.827 68.204,85.922 68.102 C 87.020 66.921,88.761 63.665,89.429 61.542 C 89.634 60.892,89.786 60.667,90.020 60.667 C 90.721 60.667,95.450 63.180,96.722 64.229 L 97.195 64.618 96.828 65.768 C 95.639 69.498,95.150 75.838,95.835 78.667 C 95.913 78.987,96.066 79.700,96.176 80.250 C 96.680 82.770,98.622 87.725,99.203 87.972 C 99.275 88.003,99.334 88.115,99.335 88.222 C 99.336 88.329,99.599 88.754,99.919 89.167 C 100.240 89.579,100.667 90.142,100.869 90.417 C 101.519 91.303,104.386 94.061,105.444 94.819 C 107.279 96.133,108.867 96.954,111.917 98.167 C 116.335 99.924,124.512 100.262,128.500 98.853 C 128.729 98.772,129.254 98.609,129.667 98.490 C 130.079 98.372,130.488 98.213,130.575 98.138 C 130.662 98.062,130.861 98.000,131.018 98.000 C 131.463 98.000,133.768 96.844,135.494 95.754 C 137.451 94.518,140.114 92.053,141.349 90.333 C 141.645 89.921,141.950 89.558,142.027 89.528 C 142.104 89.497,142.167 89.404,142.167 89.321 C 142.167 89.238,142.490 88.663,142.884 88.043 C 143.630 86.873,144.947 83.968,145.322 82.667 C 145.441 82.254,145.599 81.767,145.673 81.583 C 145.747 81.400,145.844 81.063,145.889 80.833 C 145.933 80.604,146.095 79.854,146.249 79.167 C 146.591 77.638,146.865 75.451,146.894 74.000 L 146.917 72.917 133.667 72.917 L 120.417 72.917 120.417 76.917 L 120.417 80.917 126.417 81.000 C 132.185 81.080,132.415 81.096,132.362 81.398 C 132.209 82.287,130.576 84.211,129.167 85.164 C 128.358 85.710,127.881 85.959,126.583 86.509 C 123.973 87.615,119.913 87.729,117.000 86.778 C 115.505 86.290,112.423 84.263,112.182 83.610 C 112.145 83.509,111.914 83.212,111.669 82.950 C 111.249 82.500,110.310 80.786,109.780 79.500 C 108.078 75.372,109.084 68.518,111.831 65.521 C 112.199 65.119,112.503 64.744,112.506 64.687 C 112.515 64.534,114.566 62.977,115.311 62.559 C 119.431 60.244,125.775 60.867,129.464 63.947 C 130.809 65.070,132.333 66.944,132.333 67.474 C 132.333 67.902,146.146 68.052,146.186 67.625 C 146.233 67.129,145.939 65.850,145.650 65.294 C 145.568 65.135,145.500 64.886,145.500 64.742 C 145.500 64.365,144.674 62.569,143.666 60.755 C 142.509 58.675,139.686 55.549,137.667 54.114 C 137.071 53.691,136.493 53.267,136.382 53.172 C 136.271 53.077,136.103 53.000,136.007 53.000 C 135.911 53.000,135.833 52.944,135.832 52.875 C 135.831 52.806,135.663 52.667,135.457 52.566 C 135.251 52.464,134.607 52.140,134.025 51.844 C 124.462 46.994,112.083 48.164,104.333 54.651 C 101.688 56.865,99.021 60.276,98.065 62.665 C 97.757 63.434,97.397 63.520,96.666 63.000 C 95.626 62.259,93.366 61.040,91.271 60.088 L 89.959 59.492 90.104 58.788 C 90.184 58.400,90.250 56.846,90.250 55.333 C 90.250 52.250,90.250 52.249,91.121 52.116 C 91.467 52.063,92.500 51.893,93.417 51.738 C 94.424 51.568,96.269 51.437,98.083 51.407 C 101.668 51.348,101.333 51.375,101.333 51.143 C 101.333 50.632,100.743 50.511,98.237 50.505 C 95.573 50.500,90.715 51.063,90.360 51.418 C 90.238 51.540,89.667 50.983,89.667 50.743 C 89.667 50.470,89.175 48.825,88.985 48.461 C 88.901 48.301,88.833 48.026,88.833 47.849 C 88.833 47.673,88.777 47.503,88.708 47.472 C 88.640 47.442,88.269 46.779,87.884 46.000 C 86.051 42.284,82.031 37.709,78.578 35.408 C 77.355 34.593,77.082 34.230,76.583 32.750 C 76.336 32.017,76.073 31.267,76.000 31.083 C 75.926 30.900,75.699 30.300,75.495 29.750 C 71.470 18.901,67.437 13.085,64.417 13.775 M71.167 38.324 C 71.167 38.502,71.032 38.746,70.867 38.866 C 67.079 41.623,69.933 52.819,74.845 54.467 C 78.767 55.783,81.528 49.803,79.518 44.343 C 78.931 42.748,78.916 42.667,79.221 42.667 C 79.804 42.667,81.533 45.806,82.135 47.958 C 82.244 48.348,82.427 48.985,82.542 49.375 C 82.809 50.284,82.822 55.630,82.557 56.189 C 82.455 56.406,82.274 56.921,82.154 57.333 C 80.744 62.212,76.166 65.420,71.702 64.659 C 66.940 63.847,63.108 59.724,61.560 53.750 C 60.976 51.495,61.226 46.586,62.005 45.001 C 62.073 44.863,62.360 44.262,62.643 43.667 C 64.203 40.382,67.374 38.161,70.708 38.019 C 71.058 38.005,71.167 38.077,71.167 38.324 M73.476 38.780 C 75.426 40.631,74.504 44.777,72.377 43.718 C 71.341 43.201,70.553 41.262,70.881 40.035 C 71.297 38.479,72.530 37.883,73.476 38.780 M41.383 45.605 C 41.567 45.789,41.167 46.333,40.847 46.333 C 40.473 46.333,39.234 47.682,38.922 48.429 C 36.943 53.166,39.346 60.623,43.433 62.431 C 47.891 64.402,50.609 58.561,48.366 51.833 C 48.137 51.146,47.810 50.384,47.641 50.141 C 47.472 49.898,47.333 49.623,47.333 49.530 C 47.333 49.437,47.274 49.336,47.202 49.306 C 47.005 49.222,46.333 48.225,46.333 48.016 C 46.333 47.457,47.982 48.844,48.889 50.167 C 49.171 50.579,49.524 51.048,49.672 51.208 C 50.016 51.581,50.536 52.640,51.297 54.521 C 53.985 61.164,51.179 69.585,45.583 71.663 C 39.686 73.854,32.811 69.040,31.071 61.500 C 30.728 60.017,30.559 55.698,30.810 54.833 C 30.903 54.513,31.069 53.875,31.179 53.417 C 32.071 49.689,35.061 46.577,38.583 45.707 C 39.351 45.517,41.227 45.449,41.383 45.605 M153.444 45.611 C 153.383 45.672,153.333 48.072,153.333 50.944 L 153.333 56.167 159.583 56.167 L 165.833 56.167 165.833 50.934 C 165.833 46.317,165.802 45.690,165.570 45.601 C 165.209 45.463,153.583 45.472,153.444 45.611 M42.608 47.148 C 44.065 48.576,43.981 51.459,42.467 51.987 C 40.339 52.728,38.829 48.011,40.803 46.786 C 41.488 46.361,41.887 46.441,42.608 47.148 M205.667 73.083 L 205.667 98.333 212.081 98.333 L 218.495 98.333 218.485 87.512 C 218.479 80.105,218.532 76.585,218.654 76.356 C 218.753 76.172,218.833 75.828,218.833 75.592 C 218.833 75.356,218.898 75.032,218.976 74.873 C 219.567 73.675,219.796 73.329,220.435 72.665 C 220.833 72.252,221.442 71.775,221.788 71.605 C 222.134 71.435,222.547 71.230,222.706 71.148 C 223.502 70.741,227.494 71.069,227.499 71.542 C 227.499 71.610,227.606 71.667,227.735 71.667 C 228.353 71.667,229.451 73.599,229.724 75.167 C 229.812 75.671,229.911 81.090,229.944 87.208 L 230.005 98.333 236.254 98.333 L 242.504 98.333 242.442 85.292 C 242.383 72.848,242.324 70.952,241.983 70.592 C 241.901 70.505,241.833 70.277,241.833 70.087 C 241.833 69.021,240.008 65.744,238.515 64.131 C 234.049 59.305,225.779 58.768,219.622 62.905 C 219.094 63.260,218.621 63.510,218.572 63.461 C 218.522 63.411,218.474 60.306,218.464 56.560 C 218.455 52.815,218.414 49.319,218.375 48.792 L 218.302 47.833 211.985 47.833 L 205.667 47.833 205.667 73.083 M294.833 73.083 L 294.833 98.333 299.549 98.333 L 304.265 98.333 304.799 97.167 C 305.399 95.855,305.648 95.741,306.432 96.418 C 308.565 98.260,313.267 99.728,317.000 99.717 C 324.827 99.694,331.504 95.673,334.520 89.167 C 334.881 88.388,335.249 87.620,335.338 87.461 C 335.427 87.301,335.500 86.987,335.500 86.762 C 335.500 86.537,335.567 86.312,335.648 86.261 C 335.730 86.211,335.836 85.925,335.885 85.627 C 335.933 85.328,336.090 84.483,336.233 83.750 C 336.788 80.909,336.458 75.181,335.650 73.627 C 335.568 73.468,335.500 73.186,335.500 73.000 C 335.500 72.814,335.426 72.532,335.335 72.373 C 335.244 72.214,334.907 71.494,334.586 70.774 C 333.596 68.550,329.810 63.833,329.016 63.833 C 328.929 63.833,328.756 63.740,328.632 63.625 C 327.924 62.971,325.097 61.598,323.444 61.107 C 318.423 59.614,313.367 59.903,309.021 61.932 C 307.202 62.781,307.333 63.321,307.333 54.980 L 307.333 47.833 301.083 47.833 L 294.833 47.833 294.833 73.083 M186.416 51.059 C 185.509 51.991,183.302 54.333,180.417 57.427 C 179.408 58.508,178.396 59.591,178.167 59.834 C 176.055 62.069,173.032 65.301,172.165 66.250 C 171.579 66.892,170.964 67.538,170.800 67.686 C 170.553 67.908,170.500 68.224,170.500 69.475 L 170.500 70.993 173.958 71.038 L 177.417 71.083 177.510 79.833 C 177.569 85.419,177.670 88.857,177.790 89.339 C 178.818 93.496,181.927 96.775,185.833 97.822 C 186.246 97.932,186.814 98.093,187.095 98.178 C 187.377 98.263,190.246 98.333,193.472 98.333 L 199.338 98.333 199.294 92.875 L 199.250 87.417 196.132 87.393 C 190.213 87.349,190.007 87.006,190.003 77.208 L 190.000 71.000 194.583 71.000 L 199.167 71.000 199.167 66.086 L 199.167 61.172 194.458 61.128 L 189.750 61.083 189.661 55.667 C 189.612 52.688,189.556 50.244,189.536 50.236 C 189.516 50.228,188.994 50.217,188.375 50.212 L 187.250 50.202 186.416 51.059 M153.111 61.444 C 153.050 61.506,153.000 69.831,153.000 79.944 L 153.000 98.333 159.417 98.333 L 165.833 98.333 165.833 79.833 L 165.833 61.333 159.528 61.333 C 156.060 61.333,153.172 61.383,153.111 61.444 M250.167 72.544 C 250.167 85.365,250.236 86.354,251.331 89.283 C 252.375 92.072,254.390 94.655,256.917 96.442 C 257.721 97.011,260.333 98.333,260.652 98.333 C 260.813 98.333,260.996 98.385,261.059 98.448 C 262.349 99.737,270.580 100.132,274.250 99.080 C 274.800 98.922,275.420 98.756,275.627 98.710 C 275.835 98.664,276.046 98.561,276.096 98.480 C 276.146 98.399,276.326 98.333,276.497 98.333 C 276.827 98.333,279.490 96.978,280.261 96.417 C 284.062 93.654,285.950 90.303,286.834 84.750 C 286.961 83.952,287.003 80.082,286.968 72.500 L 286.917 61.417 280.917 61.370 C 277.617 61.345,274.748 61.365,274.542 61.415 L 274.167 61.506 274.167 72.603 C 274.167 85.120,274.191 84.846,272.943 86.373 C 272.205 87.276,270.859 88.137,270.158 88.156 C 269.925 88.162,269.651 88.249,269.549 88.351 C 269.285 88.615,267.020 88.347,266.167 87.950 C 264.904 87.364,264.188 86.628,263.458 85.167 L 262.917 84.083 262.833 72.750 L 262.750 61.417 256.458 61.373 L 250.167 61.329 250.167 72.544 M317.854 71.616 C 322.801 73.033,325.325 79.352,322.801 84.000 C 321.651 86.119,319.127 88.152,317.635 88.163 C 317.388 88.165,317.140 88.242,317.083 88.333 C 317.026 88.427,316.238 88.500,315.294 88.500 C 305.761 88.500,303.178 75.524,311.973 71.816 C 313.173 71.310,316.403 71.200,317.854 71.616"></path>
                                </g>
                            </svg>
                        </a>
                    </div>
                    <div class="header__search">
                        <form action="${pageContext.request.contextPath}/search?select=1" method="get" class="header__search-form">
                            <input name="productName" type="text" class="header__search-input" placeholder="Nhập để tìm kiếm sản phẩm">
                            <button type="submit" class="header__search-btn">
                            <i class="header__search-btn-icon fas fa-search"></i>
                        </button>
                        </form>
                    </div>
                    <div class="header__cart">
                        <div class="header__cart-wrap">
                            <i class="header__cart-icon fas fa-shopping-cart"></i>
                            <c:choose>
                                <c:when test="${empty sessionScope.totalItem}">
                                    <span class="header__cart-notify">0</span>
                                </c:when>
                                <c:otherwise>
                                    <span class="header__cart-notify">${sessionScope.totalItem}</span>
                                </c:otherwise>
                            </c:choose>
                            <c:choose>
                                <c:when test="${empty sessionScope.cart}">
                                    <div class="header__cart-list header__cart-list--no-cart">
                                        <img src="./jsp/view/assets/img/no_cart.png" alt="no cart" class="header__cart-no-cart-img">
                                        <span class="header__cart-list-no-cart-msg">Chưa có sản phẩm</span>
                                    </div>
                                </c:when>
                                <c:otherwise>
                                    <div class="header__cart-list">
                                        <h4 class="header__cart-heading">Sản phẩm đã thêm</h4>
                                        <ul class="header__cart-list-item">
                                            <c:forEach items="${sessionScope.cart.cartItems}" var="item">
                                                <li class="header__cart-item">
                                                    <img src="${pageContext.request.contextPath}/images/${item.product.picture}" class="header__cart-img">
                                                    <div class="header__cart-item-info">
                                                        <div class="header__cart-item-head">
                                                            <h5 class="header__cart-item-name">${item.product.name}</h5>
                                                            <div class="header__cart-item-price-warp">
                                                                <c:choose>
                                                                    <c:when test="${item.product.salePrice = 0}">
                                                                        <span class="header__cart-item-price">${item.product.price}</span>
                                                                    </c:when>
                                                                    <c:otherwise>
                                                                        <span class="header__cart-item-price">${item.product.salePrice}</span>
                                                                    </c:otherwise>
                                                                </c:choose>
                                                                <span class="header__cart-item-multi">x</span>
                                                                <span class="header__cart-item-quantity">${item.quantity}</span>
                                                            </div>
                                                        </div>
                                                        <div class="header__cart-item-body">
                                                            <!-- TODO category here -->
                                                            <span class="header__cart-item-description"></span>
                                                            <form action="${pageContext.request.contextPath}/cart" method="post">
                                                                <input type="hidden" value="delete" name="act">
                                                                <input type="hidden" name="idCartItem" value="${item.id}">
                                                                <button class="header__cart-item-remove" type="submit">Xóa</button>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </li>
                                            </c:forEach>
                                        </ul>
                                        <div class="header__cart-view">
                                            <a href="${pageContext.request.contextPath}/cart/list" class="btn btn--primary link">
                                            Xem giỏ hàng
                                        </a>
                                        </div>
                                    </div>
                                </c:otherwise>
                            </c:choose>
                        </div>
                    </div>
                </div>
            </div>
        </div>